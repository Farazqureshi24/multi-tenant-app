<div class="dashboard-container">
  <div class="dashboard-header">
    <div class="header-content">
      <h1>Welcome back, {{ authService.getCurrentUser()?.fullName }}!</h1>
      <p class="subtitle">{{ tenantService.getTenant()?.appName }} Dashboard</p>
    </div>
    
    <div class="user-badge">
      <span class="role-badge" [class.admin]="authService.isAdmin()">
        <mat-icon>{{ authService.isAdmin() ? 'admin_panel_settings' : 'person' }}</mat-icon>
        {{ authService.getCurrentUser()?.role | uppercase }}
      </span>
    </div>
  </div>

  <!-- Public Cards (visible to all roles) -->
  <div class="cards-section">
    <h2 class="section-title">General Metrics</h2>
    <mat-grid-list cols="2" rowHeight="180px" gutterSize="16px">
      <mat-grid-tile>
        <mat-card class="metric-card">
          <mat-card-header>
            <div class="card-icon" style="background-color: #4caf50;">
              <mat-icon>trending_up</mat-icon>
            </div>
          </mat-card-header>
          <mat-card-content>
            <h3>Total Revenue</h3>
            <p class="metric-value">$125,450</p>
            <p class="metric-change positive">
              <mat-icon>arrow_upward</mat-icon>
              +12.5% from last month
            </p>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-card class="metric-card">
          <mat-card-header>
            <div class="card-icon" style="background-color: #2196F3;">
              <mat-icon>people</mat-icon>
            </div>
          </mat-card-header>
          <mat-card-content>
            <h3>Active Users</h3>
            <p class="metric-value">2,456</p>
            <p class="metric-change positive">
              <mat-icon>arrow_upward</mat-icon>
              +8.2% from last month
            </p>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>
    </mat-grid-list>
  </div>

  <!-- Admin-Only Cards -->
  <div class="cards-section" *ngIf="authService.isAdmin()">
    <h2 class="section-title">
      <mat-icon>admin_panel_settings</mat-icon>
      Admin Controls (Admin Only)
    </h2>
    <mat-grid-list cols="2" rowHeight="270px" gutterSize="16px">
      <mat-grid-tile>
        <mat-card class="metric-card admin-card">
          <mat-card-header>
            <div class="card-icon" style="background-color: #f44336;">
              <mat-icon>security</mat-icon>
            </div>
          </mat-card-header>
          <mat-card-content>
            <h3>System Security</h3>
            <p class="metric-value">98.5%</p>
            <p class="metric-description">
              Security score and access logs available in admin panel
            </p>
            <button mat-stroked-button color="primary" routerLink="/admin">
              <mat-icon>arrow_forward</mat-icon>
              View Admin Panel
            </button>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-card class="metric-card admin-card">
          <mat-card-header>
            <div class="card-icon" style="background-color: #ff9800;">
              <mat-icon>settings</mat-icon>
            </div>
          </mat-card-header>
          <mat-card-content>
            <h3>Configuration</h3>
            <p class="metric-value">23</p>
            <p class="metric-description">
              System configurations, user roles, and permissions
            </p>
            <button mat-stroked-button color="primary" routerLink="/admin">
              <mat-icon>arrow_forward</mat-icon>
              Manage Settings
            </button>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>
    </mat-grid-list>
  </div>

  <!-- User Info Section -->
  <div class="user-info-section">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Your Account Information</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="info-grid">
          <div class="info-item">
            <span class="label">Email:</span>
            <span class="value">{{ authService.getCurrentUser()?.email }}</span>
          </div>
          <div class="info-item">
            <span class="label">Username:</span>
            <span class="value">{{ authService.getCurrentUser()?.username }}</span>
          </div>
          <div class="info-item">
            <span class="label">Role:</span>
            <span class="value role-value" [class.admin]="authService.isAdmin()">
              {{ authService.getCurrentUser()?.role | uppercase }}
            </span>
          </div>
          <div class="info-item">
            <span class="label">Tenant:</span>
            <span class="value">{{ tenantService.getTenant()?.name }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
