<div class="login-container">
  <div class="login-background"></div>
  
  <div class="login-content">
    <mat-card class="login-card">
      <!-- Logo and Title -->
      <div class="login-header">
        <img *ngIf="tenantService.getTenant()?.logo" 
             [src]="tenantService.getTenant()?.logo" 
             alt="Logo"
             class="login-logo">
        <h1>{{ tenantService.getTenant()?.appName }}</h1>
        <p class="subtitle">{{ tenantService.getTenant()?.description }}</p>
      </div>

      <!-- Login Form -->
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
        <!-- Email Field -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email Address</mat-label>
          <input matInput 
                 type="email" 
                 formControlName="email"
                 placeholder="Enter your email">
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="email?.hasError('required')">Email is required</mat-error>
          <mat-error *ngIf="email?.hasError('email')">Please enter a valid email</mat-error>
        </mat-form-field>

        <!-- Password Field -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Password</mat-label>
          <input matInput 
                 [type]="hidePassword() ? 'password' : 'text'"
                 formControlName="password"
                 placeholder="Enter your password">
          <button mat-icon-button matSuffix (click)="togglePasswordVisibility()" type="button">
            <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-error *ngIf="password?.hasError('required')">Password is required</mat-error>
          <mat-error *ngIf="password?.hasError('minlength')">Password must be at least 6 characters</mat-error>
        </mat-form-field>

        <!-- Login Button -->
        <button mat-raised-button 
                color="primary" 
                type="submit" 
                class="login-button"
                [disabled]="authService.loading$()">
          <mat-icon *ngIf="authService.loading$()" class="spinner">
            <mat-spinner diameter="20"></mat-spinner>
          </mat-icon>
          <span *ngIf="!authService.loading$()">Sign In</span>
          <span *ngIf="authService.loading$()">Signing in...</span>
        </button>
      </form>

      <!-- Divider -->
      <div class="divider">
        <span>Or use test credentials</span>
      </div>

      <!-- Test Credentials -->
      <div class="test-credentials" *ngIf="testCredentials.length > 0">
        <div class="credentials-info">
          <p class="info-text">Click on a credential to pre-fill the form (for demo purposes):</p>
        </div>
        <div class="credentials-list">
          <button *ngFor="let cred of testCredentials" 
                  type="button"
                  mat-stroked-button
                  class="credential-button"
                  (click)="useTestCredential(cred)">
            <span class="role-badge" [class.admin]="cred.role === 'admin'">
              {{ cred.role | uppercase }}
            </span>
            <span class="credential-email">{{ cred.email }}</span>
          </button>
        </div>
      </div>

      <!-- Footer -->
      <div class="login-footer">
        <p class="footer-text">
          Having trouble? Contact your administrator for support.
        </p>
      </div>
    </mat-card>

    <!-- Tenant Info Card -->
    <mat-card class="tenant-info-card">
      <h3>Current Tenant</h3>
      <div class="tenant-details">
        <p><strong>Tenant:</strong> {{ tenantService.getTenant()?.name }}</p>
        <p><strong>Layout:</strong> {{ tenantService.getTenant()?.layout | uppercase }}</p>
      </div>
    </mat-card>
  </div>
</div>
